"use strict";(self["webpackChunkspringboot_vue_view"]=self["webpackChunkspringboot_vue_view"]||[]).push([[773,247],{6318:function(e,l,a){a.r(l),a.d(l,{default:function(){return c}});var t=a(3396);const i={style:{padding:"10px"}},o={style:{margin:"10px 0"}},d={style:{margin:"10px 0",width:"20%",display:"flex"}},n={class:"demo-pagination-block",style:{margin:"8px 0"}},r=["innerHTML"];function s(e,l,a,s,m,u){const p=(0,t.up)("el-button"),h=(0,t.up)("el-input"),g=(0,t.up)("el-table-column"),c=(0,t.up)("el-popconfirm"),f=(0,t.up)("el-table"),b=(0,t.up)("el-pagination"),w=(0,t.up)("el-form-item"),W=(0,t.up)("el-date-picker"),y=(0,t.up)("el-form"),C=(0,t.up)("MyEditor"),k=(0,t.up)("el-dialog"),_=(0,t.up)("el-card");return(0,t.wg)(),(0,t.iD)("div",i,[(0,t._)("div",o,[(0,t.Wm)(p,{type:"primary",onClick:u.add},{default:(0,t.w5)((()=>[(0,t.Uk)("新增")])),_:1},8,["onClick"])]),(0,t._)("div",d,[(0,t.Wm)(h,{modelValue:m.search,"onUpdate:modelValue":l[0]||(l[0]=e=>m.search=e),placeholder:"请输入新闻标题查询",clearable:""},null,8,["modelValue"]),(0,t.Wm)(p,{style:{"margin-left":"5px"},type:"primary",onClick:u.findPage},{default:(0,t.w5)((()=>[(0,t.Uk)("查询")])),_:1},8,["onClick"])]),(0,t.Wm)(f,{data:m.tableData,border:"",stripe:"",style:{width:"auto"}},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{prop:"id",label:"id",sortable:""}),(0,t.Wm)(g,{prop:"title",label:"标题"}),(0,t.Wm)(g,{prop:"author",label:"作者"}),(0,t.Wm)(g,{prop:"time",label:"时间"}),(0,t.Wm)(g,{label:"操作"},{default:(0,t.w5)((l=>[(0,t.Wm)(p,{size:"small",onClick:e=>u.detail(l.row)},{default:(0,t.w5)((()=>[(0,t.Uk)("详情")])),_:2},1032,["onClick"]),(0,t.Wm)(p,{size:"small",onClick:e=>u.handleEdit(l.row)},{default:(0,t.w5)((()=>[(0,t.Uk)("编辑")])),_:2},1032,["onClick"]),(0,t.Wm)(c,{width:"220","confirm-button-text":"确认","cancel-button-text":"取消",icon:e.InfoFilled,"icon-color":"#626AEF",title:"确认要删除吗？",onConfirm:e=>u.handleDelete(l.row.id)},{reference:(0,t.w5)((()=>[(0,t.Wm)(p,{size:"small",type:"danger"},{default:(0,t.w5)((()=>[(0,t.Uk)("删除")])),_:1})])),_:2},1032,["icon","onConfirm"])])),_:1})])),_:1},8,["data"]),(0,t._)("div",n,[(0,t.Wm)(b,{"current-page":m.currentPage,"onUpdate:currentPage":l[1]||(l[1]=e=>m.currentPage=e),"page-size":m.pageSize,"onUpdate:pageSize":l[2]||(l[2]=e=>m.pageSize=e),"page-sizes":[5,10,20],small:!0,disabled:!1,background:!0,layout:"total, sizes, prev, pager, next, jumper",total:m.total,onSizeChange:u.handleSizeChange,onCurrentChange:u.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])]),(0,t.Wm)(k,{modelValue:m.dialogVisible,"onUpdate:modelValue":l[5]||(l[5]=e=>m.dialogVisible=e),"lock-scroll":!1,"append-to-body":!0,title:"编辑",width:"50%"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{model:m.form},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{label:"作者：","label-width":m.formLabelWidth},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{modelValue:m.form.author,"onUpdate:modelValue":l[3]||(l[3]=e=>m.form.author=e),style:{width:"80%"},placeholder:"默认为：author"},null,8,["modelValue"])])),_:1},8,["label-width"]),(0,t.Wm)(w,{label:"时间：","label-width":m.formLabelWidth},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{modelValue:m.form.time,"onUpdate:modelValue":l[4]||(l[4]=e=>m.form.time=e),"value-format":"YYYY-MM-DD HH:mm:ss",type:"datetime",clearable:""},null,8,["modelValue"])])),_:1},8,["label-width"])])),_:1},8,["model"]),(0,t.Wm)(C,{forms:m.form,ref:"myEditor"},null,8,["forms"])])),_:1},8,["modelValue"]),(0,t.Wm)(k,{modelValue:m.detailsdialog,"onUpdate:modelValue":l[6]||(l[6]=e=>m.detailsdialog=e),"lock-scroll":!1,"append-to-body":!0,title:"文本详情",width:"50%"},{default:(0,t.w5)((()=>[(0,t.Wm)(_,null,{default:(0,t.w5)((()=>[(0,t._)("div",{innerHTML:m.details.content,style:{"min-height":"100px"}},null,8,r)])),_:1})])),_:1},8,["modelValue"])])}a(7658);var m=a(60),u=a(2889),p={name:"News",components:{MyEditor:u["default"]},data(){return{form:{},formLabelWidth:75,dialogVisible:!1,detailsdialog:!1,currentPage:1,pageSize:10,total:0,search:"",tableData:[],details:{}}},created(){this.findPage()},methods:{detail(e){this.details=e,this.detailsdialog=!0},findPage(){m.Z.get("/news/findPage",{params:{pageNum:this.currentPage,pageSize:this.pageSize,search:this.search}}).then((e=>{console.log(e),this.tableData=e.data.records,this.total=e.data.total}))},add(){this.dialogVisible=!0,this.form={},this.$router.push("/myEditor")},handleEdit(e){this.form=JSON.parse(JSON.stringify(e)),this.dialogVisible=!0},errorInfo(e){this.$message({type:"error",message:e.msg})},handleDelete(e){console.log(e),m.Z.delete("/news/delete/"+e).then((e=>{"0"===e.code?this.$message({type:"success",message:"删除成功"}):this.errorInfo(e),this.findPage()}))},handleSizeChange(e){this.pageSize=e,this.findPage()},handleCurrentChange(e){this.currentPage=e,this.findPage()}}},h=a(89);const g=(0,h.Z)(p,[["render",s]]);var c=g}}]);
//# sourceMappingURL=773.69e58d41.js.map